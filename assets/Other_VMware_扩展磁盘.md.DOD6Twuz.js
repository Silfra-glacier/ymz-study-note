import{_ as a,c as i,o as e,ag as t}from"./chunks/framework.BUKXnrp5.js";const p="/ymz-study-note/assets/image-20250219162339682.7oe-Jdef.png",n="/ymz-study-note/assets/image-20250219162705875.B2usJ2me.png",d="/ymz-study-note/assets/image-20250219162923820.A67B9UGf.png",F=JSON.parse('{"title":"VMware 磁盘扩展","description":"","frontmatter":{},"headers":[],"relativePath":"Other/VMware/扩展磁盘.md","filePath":"Other/VMware/扩展磁盘.md","lastUpdated":1740398526000}'),h={name:"Other/VMware/扩展磁盘.md"};function l(o,s,c,k,r,g){return e(),i("div",null,s[0]||(s[0]=[t('<h1 id="vmware-磁盘扩展" tabindex="-1">VMware 磁盘扩展 <a class="header-anchor" href="#vmware-磁盘扩展" aria-label="Permalink to &quot;VMware 磁盘扩展&quot;">​</a></h1><p>当虚拟机空间满时，使用 vmware 在设置中扩展磁盘容量后，设为 24GB，然后开启虚拟机，进入命令行界面，无法进入图形化界面，在命令行卡住时按下 <code>Ctrl + Alt + F2</code> 或 <code>Ctrl + Alt + F3</code>（不同 Linux 版本可能不同），进入 TTY 命令行。</p><p><strong>执行：</strong></p><div class="language-ash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>lsblk</span></span></code></pre></div><p>查看 <code>/dev/sda3</code> 是否已经扩展到你调整的大小，即 <code>sda</code> 应为 24GB，<code>sda3</code> 大小也应被正确扩展，下图为 <code>sda3</code> 未被正确扩展的情况：</p><p><img src="'+p+'" alt="image-20250219162339682"></p><blockquote><p>如果 <code>sda</code> 也不是 24GB，则在继续下述步骤前，应先检查 vmware 的手动磁盘扩展问题，确保 <code>sda</code> 显示为正确扩展的容量。</p></blockquote><p>扩展 <code>/dev/sda3</code> 的 <strong>文件系统</strong>，让它使用整个新的磁盘空间：</p><p>首先检查文件系统类型：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsblk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span></span></code></pre></div><p>效果如下图，可以看到文件系统使用 <code>ext4</code> ：</p><p><img src="'+n+'" alt="image-20250219162705875"></p><p><strong>如果是 <code>ext4</code> 文件系统：</strong></p><p>执行：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> resize2fs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda3</span></span></code></pre></div><p>然后检查：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">df</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span></span></code></pre></div><p>如果 <code>/dev/sda3</code> 现在显示更大的容量，说明扩展成功。</p><p><strong>如果是 <code>xfs</code> 文件系统（未测试过）：</strong></p><p>执行：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xfs_growfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span></span></code></pre></div><p>然后检查：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">df</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span></span></code></pre></div><p>如下图，扩展成功，显示为 23GB：</p><p><img src="'+d+`" alt="image-20250219162923820"></p><p>重启系统，即可进入图形化界面，扩展完成：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reboot</span></span></code></pre></div><p>如果以上步骤执行完成后没有扩展成功，即 <code>lsblk</code> 显示仍未扩展，则使用 <code>parted</code> 或 <code>gparted</code> 工具来扩展分区，在不影响数据的前提下，可以使用 <code>resizepart</code> 命令：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> parted</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resizepart</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100%</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">quit</span></span></code></pre></div><p><strong>扩展分区后，再次尝试扩展文件系统：</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> resize2fs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda3</span></span></code></pre></div><p>然后再次使用 <code>df -h</code> 检查。</p>`,32)]))}const u=a(h,[["render",l]]);export{F as __pageData,u as default};
